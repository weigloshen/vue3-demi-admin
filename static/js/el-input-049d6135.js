var je=Object.defineProperty,Ue=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var Xe=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var Se=(a,s,n)=>s in a?je(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,Q=(a,s)=>{for(var n in s||(s={}))Xe.call(s,n)&&Se(a,n,s[n]);if(we)for(var n of we(s))Ye.call(s,n)&&Se(a,n,s[n]);return a},Ce=(a,s)=>Ue(a,We(s));var H=(a,s,n)=>new Promise((o,r)=>{var u=i=>{try{b(n.next(i))}catch(h){r(h)}},d=i=>{try{b(n.throw(i))}catch(h){r(h)}},b=i=>i.done?o(i.value):Promise.resolve(i.value).then(u,d);b((n=n.apply(a,s)).next())});import{M as Ne,P as p,A as Ze,b as F,aK as Ie,l as Ge,S as qe,z as ee,m as Ee,ao as Je,U as te,d as Ve,bd as Qe,a4 as et,n as ke,N as ae,bh as tt,bD as at,bE as ot,am as nt,O as oe,Z as A,s as st,aa as lt,j as rt,v as it,o as f,e as x,$ as m,F as ne,x as y,g as t,t as j,h as P,D as w,w as B,G as U,i as _,K as se,f as ut,aI as ct,a5 as dt,aB as pt,H as W,R as ft,y as vt,ap as ze,I as mt}from"./index-f8fc1903.js";import{U as le,d as Pe}from"./event-e06a23af.js";import{f as ht,i as yt}from"./lodash-f24acc27.js";import{u as bt,c as gt,a as xt,b as wt}from"./el-button-e7c22a1d.js";const St=()=>Ne&&/firefox/i.test(window.navigator.userAgent),Ct=a=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(a),It=["class","style"],Et=/^on[A-Z]/,kt=(a={})=>{const{excludeListeners:s=!1,excludeKeys:n}=a,o=p(()=>((n==null?void 0:n.value)||[]).concat(It)),r=Ze();return r?p(()=>{var u;return ht(Object.entries((u=r.proxy)==null?void 0:u.$attrs).filter(([d])=>!o.value.includes(d)&&!(s&&Et.test(d))))}):p(()=>({}))};function zt(a){const s=F();function n(){if(a.value==null)return;const{selectionStart:r,selectionEnd:u,value:d}=a.value;if(r==null||u==null)return;const b=d.slice(0,Math.max(0,r)),i=d.slice(Math.max(0,u));s.value={selectionStart:r,selectionEnd:u,value:d,beforeTxt:b,afterTxt:i}}function o(){if(a.value==null||s.value==null)return;const{value:r}=a.value,{beforeTxt:u,afterTxt:d,selectionStart:b}=s.value;if(u==null||d==null||b==null)return;let i=r.length;if(r.endsWith(d))i=r.length-d.length;else if(r.startsWith(u))i=u.length;else{const h=u[b-1],S=r.indexOf(h,b-1);S!==-1&&(i=S+1)}a.value.setSelectionRange(i,i)}return[n,o]}let g;const Pt=`
  height:0 !important;
  visibility:hidden !important;
  ${St()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Ft=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Nt(a){const s=window.getComputedStyle(a),n=s.getPropertyValue("box-sizing"),o=Number.parseFloat(s.getPropertyValue("padding-bottom"))+Number.parseFloat(s.getPropertyValue("padding-top")),r=Number.parseFloat(s.getPropertyValue("border-bottom-width"))+Number.parseFloat(s.getPropertyValue("border-top-width"));return{contextStyle:Ft.map(d=>`${d}:${s.getPropertyValue(d)}`).join(";"),paddingSize:o,borderSize:r,boxSizing:n}}function Fe(a,s=1,n){var o;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:r,borderSize:u,boxSizing:d,contextStyle:b}=Nt(a);g.setAttribute("style",`${b};${Pt}`),g.value=a.value||a.placeholder||"";let i=g.scrollHeight;const h={};d==="border-box"?i=i+u:d==="content-box"&&(i=i-r),g.value="";const S=g.scrollHeight-r;if(Ie(s)){let v=S*s;d==="border-box"&&(v=v+r+u),i=Math.max(v,i),h.minHeight=`${v}px`}if(Ie(n)){let v=S*n;d==="border-box"&&(v=v+r+u),i=Math.min(v,i)}return h.height=`${i}px`,(o=g.parentNode)==null||o.removeChild(g),g=void 0,h}const Vt=Ge({id:{type:String,default:void 0},size:qe,disabled:Boolean,modelValue:{type:ee([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ee([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Ee},prefixIcon:{type:Ee},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ee([Object,Array,String]),default:()=>Je({})}}),Tt={[le]:a=>te(a),input:a=>te(a),change:a=>te(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent},$t=["role"],Mt=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],At=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Bt=Ve({name:"ElInput",inheritAttrs:!1}),_t=Ve(Ce(Q({},Bt),{props:Vt,emits:Tt,setup(a,{expose:s,emit:n}){const o=a,r=Qe(),u=et(),d=p(()=>{const e={};return o.containerRole==="combobox"&&(e["aria-haspopup"]=r["aria-haspopup"],e["aria-owns"]=r["aria-owns"],e["aria-expanded"]=r["aria-expanded"]),e}),b=p(()=>[o.type==="textarea"?ie.b():l.b(),l.m(Te.value),l.is("disabled",k.value),l.is("exceed",Ae.value),{[l.b("group")]:u.prepend||u.append,[l.bm("group","append")]:u.append,[l.bm("group","prepend")]:u.prepend,[l.m("prefix")]:u.prefix||o.prefixIcon,[l.m("suffix")]:u.suffix||o.suffixIcon||o.clearable||o.showPassword,[l.bm("suffix","password-clear")]:L.value&&Z.value},r.class]),i=p(()=>[l.e("wrapper"),l.is("focus",N.value)]),h=kt({excludeKeys:p(()=>Object.keys(d.value))}),{form:S,formItem:v}=bt(),{inputId:re}=gt(o,{formItemContext:v}),Te=xt(),k=wt(),l=ke("input"),ie=ke("textarea"),R=ae(),I=ae(),N=F(!1),X=F(!1),V=F(!1),D=F(!1),ue=F(),Y=ae(o.inputStyle),T=p(()=>R.value||I.value),ce=p(()=>{var e;return(e=S==null?void 0:S.statusIcon)!=null?e:!1}),$=p(()=>(v==null?void 0:v.validateState)||""),de=p(()=>$.value&&tt[$.value]),$e=p(()=>D.value?at:ot),Me=p(()=>[r.style,o.inputStyle]),pe=p(()=>[o.inputStyle,Y.value,{resize:o.resize}]),C=p(()=>yt(o.modelValue)?"":String(o.modelValue)),L=p(()=>o.clearable&&!k.value&&!o.readonly&&!!C.value&&(N.value||X.value)),Z=p(()=>o.showPassword&&!k.value&&!o.readonly&&!!C.value&&(!!C.value||N.value)),z=p(()=>o.showWordLimit&&!!h.value.maxlength&&(o.type==="text"||o.type==="textarea")&&!k.value&&!o.readonly&&!o.showPassword),G=p(()=>Array.from(C.value).length),Ae=p(()=>!!z.value&&G.value>Number(h.value.maxlength)),Be=p(()=>!!u.suffix||!!o.suffixIcon||L.value||o.showPassword||z.value||!!$.value&&ce.value),[_e,Re]=zt(R);nt(I,e=>{if(!z.value||o.resize!=="both")return;const c=e[0],{width:E}=c.contentRect;ue.value={right:`calc(100% - ${E+15+6}px)`}});const O=()=>{const{type:e,autosize:c}=o;if(!(!Ne||e!=="textarea"||!I.value))if(c){const E=ze(c)?c.minRows:void 0,J=ze(c)?c.maxRows:void 0;Y.value=Q({},Fe(I.value,E,J))}else Y.value={minHeight:Fe(I.value).minHeight}},M=()=>{const e=T.value;!e||e.value===C.value||(e.value=C.value)},q=e=>H(this,null,function*(){_e();let{value:c}=e.target;if(o.formatter&&(c=o.parser?o.parser(c):c,c=o.formatter(c)),!V.value){if(c===C.value){M();return}n(le,c),n("input",c),yield A(),M(),Re()}}),fe=e=>{n("change",e.target.value)},ve=e=>{n("compositionstart",e),V.value=!0},me=e=>{var c;n("compositionupdate",e);const E=(c=e.target)==null?void 0:c.value,J=E[E.length-1]||"";V.value=!Ct(J)},he=e=>{n("compositionend",e),V.value&&(V.value=!1,q(e))},De=()=>{D.value=!D.value,K()},K=()=>H(this,null,function*(){var e;yield A(),(e=T.value)==null||e.focus()}),Le=()=>{var e;return(e=T.value)==null?void 0:e.blur()},ye=e=>{N.value=!0,n("focus",e)},be=e=>{var c;N.value=!1,n("blur",e),o.validateEvent&&((c=v==null?void 0:v.validate)==null||c.call(v,"blur").catch(E=>Pe()))},Oe=e=>{X.value=!1,n("mouseleave",e)},Ke=e=>{X.value=!0,n("mouseenter",e)},ge=e=>{n("keydown",e)},He=()=>{var e;(e=T.value)==null||e.select()},xe=()=>{n(le,""),n("change",""),n("clear"),n("input","")};return oe(()=>o.modelValue,()=>{var e;A(()=>O()),o.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(c=>Pe()))}),oe(C,()=>M()),oe(()=>o.type,()=>H(this,null,function*(){yield A(),M(),O()})),st(()=>{!o.formatter&&o.parser,M(),A(O)}),s({input:R,textarea:I,ref:T,textareaStyle:pe,autosize:lt(o,"autosize"),focus:K,blur:Le,select:He,clear:xe,resizeTextarea:O}),(e,c)=>rt((f(),x("div",se(t(d),{class:t(b),style:t(Me),role:e.containerRole,onMouseenter:Ke,onMouseleave:Oe}),[m(" input "),e.type!=="textarea"?(f(),x(ne,{key:0},[m(" prepend slot "),e.$slots.prepend?(f(),x("div",{key:0,class:y(t(l).be("group","prepend"))},[j(e.$slots,"prepend")],2)):m("v-if",!0),P("div",{class:y(t(i))},[m(" prefix slot "),e.$slots.prefix||e.prefixIcon?(f(),x("span",{key:0,class:y(t(l).e("prefix"))},[P("span",{class:y(t(l).e("prefix-inner")),onClick:K},[j(e.$slots,"prefix"),e.prefixIcon?(f(),w(t(_),{key:0,class:y(t(l).e("icon"))},{default:B(()=>[(f(),w(U(e.prefixIcon)))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0),P("input",se({id:t(re),ref_key:"input",ref:R,class:t(l).e("inner")},t(h),{type:e.showPassword?D.value?"text":"password":e.type,disabled:t(k),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:o.form,onCompositionstart:ve,onCompositionupdate:me,onCompositionend:he,onInput:q,onFocus:ye,onBlur:be,onChange:fe,onKeydown:ge}),null,16,Mt),m(" suffix slot "),t(Be)?(f(),x("span",{key:1,class:y(t(l).e("suffix"))},[P("span",{class:y(t(l).e("suffix-inner")),onClick:K},[!t(L)||!t(Z)||!t(z)?(f(),x(ne,{key:0},[j(e.$slots,"suffix"),e.suffixIcon?(f(),w(t(_),{key:0,class:y(t(l).e("icon"))},{default:B(()=>[(f(),w(U(e.suffixIcon)))]),_:1},8,["class"])):m("v-if",!0)],64)):m("v-if",!0),t(L)?(f(),w(t(_),{key:1,class:y([t(l).e("icon"),t(l).e("clear")]),onMousedown:dt(t(pt),["prevent"]),onClick:xe},{default:B(()=>[ut(t(ct))]),_:1},8,["class","onMousedown"])):m("v-if",!0),t(Z)?(f(),w(t(_),{key:2,class:y([t(l).e("icon"),t(l).e("password")]),onClick:De},{default:B(()=>[(f(),w(U(t($e))))]),_:1},8,["class"])):m("v-if",!0),t(z)?(f(),x("span",{key:3,class:y(t(l).e("count"))},[P("span",{class:y(t(l).e("count-inner"))},W(t(G))+" / "+W(t(h).maxlength),3)],2)):m("v-if",!0),t($)&&t(de)&&t(ce)?(f(),w(t(_),{key:4,class:y([t(l).e("icon"),t(l).e("validateIcon"),t(l).is("loading",t($)==="validating")])},{default:B(()=>[(f(),w(U(t(de))))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0)],2),m(" append slot "),e.$slots.append?(f(),x("div",{key:1,class:y(t(l).be("group","append"))},[j(e.$slots,"append")],2)):m("v-if",!0)],64)):(f(),x(ne,{key:1},[m(" textarea "),P("textarea",se({id:t(re),ref_key:"textarea",ref:I,class:t(ie).e("inner")},t(h),{tabindex:e.tabindex,disabled:t(k),readonly:e.readonly,autocomplete:e.autocomplete,style:t(pe),"aria-label":e.label,placeholder:e.placeholder,form:o.form,onCompositionstart:ve,onCompositionupdate:me,onCompositionend:he,onInput:q,onFocus:ye,onBlur:be,onChange:fe,onKeydown:ge}),null,16,At),t(z)?(f(),x("span",{key:0,style:ft(ue.value),class:y(t(l).e("count"))},W(t(G))+" / "+W(t(h).maxlength),7)):m("v-if",!0)],64))],16,$t)),[[it,e.type!=="hidden"]])}}));var Rt=vt(_t,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const jt=mt(Rt);export{jt as E,Ct as a,St as i};
